namespace = amaryllian

### Flags mod as present
event = {
        id = amaryllian.9
        hide_window = yes
		fire_only_once = yes
        trigger = {
                always = yes
        }
        immediate = {
                set_global_flag = amaryllian_habitat_start_installed
        }
}

### Prepare starting habitat

planet_event = {
	id = amaryllian.0
	hide_window = yes
	fire_only_once = yes
	trigger = {
	has_planet_flag = amaryllian_habitat
	}
	immediate = {
		save_event_target_as = amaryllian_habitat_target
		clear_blockers = yes
		clear_deposits = yes
		set_planet_flag = megastructure
		set_planet_flag = habitat
		planet_event = {
			id = amaryllian.1
			days = 1
			random = 0
		}
	}
}

planet_event = {
	id = amaryllian.1
	hide_window = yes
	is_triggered_only = yes
	trigger = {
	has_planet_flag = amaryllian_habitat
	}
	immediate = {
		change_pc = pc_habitat
		set_planet_entity = { entity = "orbital_habitat_entity" graphical_culture = fromfrom }
		planet_event = {
			id = amaryllian.2
			days = 1
			random = 0
		}
	}
}

planet_event = {
	id = amaryllian.2
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_planet_flag = amaryllian_habitat
	}

	immediate = {
	
	if = {
		limit = { owner = { is_regular_empire = yes is_lithoid_empire = no is_machine_empire = no} }	
			clear_blockers = yes
			clear_deposits = yes
			remove_building = building_capital
			add_building = building_hab_major_capital
			remove_building = building_research_lab_1
			add_district = district_hab_housing
			add_district = district_hab_housing
			add_district = district_hab_science
			add_district = district_hab_commercial
			add_district = district_hab_cultural
			add_building = building_hydroponics_farm
			add_building = building_hydroponics_farm
			add_deposit = amaryllian_d_hab_minerals_1
			add_deposit = amaryllian_d_hab_energy_1
			add_deposit = amaryllian_d_hab_food_1
			add_deposit = d_hab_alloy_5
			break = yes
			}
			
	else_if = {
		limit = { owner = { is_lithoid_empire = yes } 
				any_owned_pop = { is_lithoid = no is_organic_species = yes } }
			clear_blockers = yes
			clear_deposits = yes
			remove_building = building_capital
			add_building = building_hab_major_capital
			remove_building = building_research_lab_1
			add_district = district_hab_housing
			add_district = district_hab_housing
			add_district = district_hab_science
			add_district = district_hab_commercial
			add_district = district_hab_commercial
			add_district = district_hab_cultural
			add_building = building_hydroponics_farm
			add_building = building_hydroponics_farm
			add_building = building_mineral_purification_plant
			add_deposit = amaryllian_d_hab_minerals_1
			add_deposit = amaryllian_d_hab_energy_1			
			add_deposit = d_hab_alloy_5
			break = yes
			}

	else_if = {
		limit = { owner = { is_lithoid_empire = yes is_hive_empire = no } }
			clear_blockers = yes
			clear_deposits = yes
			remove_building = building_capital
			add_building = building_hab_major_capital
			remove_building = building_research_lab_1
			add_district = district_hab_housing
			add_district = district_hab_housing
			add_district = district_hab_science
			add_district = district_hab_commercial
			add_district = district_hab_commercial
			add_district = district_hab_cultural
			add_building = building_mineral_purification_plant		
			add_deposit = amaryllian_d_hab_minerals_1
			add_deposit = amaryllian_d_hab_energy_1
			add_deposit = d_hab_alloy_5
			break = yes
			}
			
	else_if = {
		limit = { owner = { is_lithoid_empire = yes is_hive_empire = yes } }
			clear_blockers = yes
			clear_deposits = yes
			remove_building = building_hive_capital
			add_building = building_hab_major_capital
			remove_building = building_research_lab_1
			add_district = district_hab_housing
			add_district = district_hab_housing
			add_district = district_hab_science
			add_district = district_hab_energy
			add_district = district_hab_energy
			add_district = district_hab_energy
			add_building = building_hive_node
			add_building = building_mineral_purification_plant			
			add_deposit = amaryllian_d_hab_minerals_1
			add_deposit = amaryllian_d_hab_energy_1
			add_deposit = d_hab_alloy_5
			break = yes
			}

	else_if = { 
		limit = { owner = { has_authority = auth_machine_intelligence }
				any_owned_pop = { is_lithoid = no is_organic_species = yes }
				}
			clear_blockers = yes
			clear_deposits = yes
			remove_building = building_machine_capital
			add_building = building_hab_major_capital
			remove_building = building_research_lab_1
			add_district = district_hab_housing
			add_district = district_hab_housing
			add_district = district_hab_science
			add_district = district_hab_energy
			add_district = district_hab_energy
			add_district = district_hab_energy
			add_building = building_hydroponics_farm
			add_building = building_hydroponics_farm
			add_building = building_maintenance_depot
			add_deposit = amaryllian_d_hab_minerals_1
			add_deposit = amaryllian_d_hab_energy_1
			add_deposit = d_hab_alloy_5
			break = yes
			}

	else_if = { 
		limit = { owner = { has_authority = auth_machine_intelligence }
				any_owned_pop = { is_lithoid = yes is_organic_species = yes }
				}
			clear_blockers = yes
			clear_deposits = yes
			remove_building = building_machine_capital
			add_building = building_hab_major_capital
			remove_building = building_research_lab_1
			add_district = district_hab_housing
			add_district = district_hab_housing
			add_district = district_hab_science
			add_district = district_hab_energy
			add_district = district_hab_energy
			add_district = district_hab_energy
			add_building = building_drone_storage
			add_building = building_maintenance_depot
			add_deposit = amaryllian_d_hab_minerals_1
			add_deposit = amaryllian_d_hab_energy_1
			add_deposit = d_hab_alloy_5
			break = yes
			}
			
	else_if = {
		limit = { owner = { is_machine_empire = yes } }
			clear_blockers = yes
			clear_deposits = yes
			remove_building = building_machine_capital
			add_building = building_hab_major_capital
			remove_building = building_research_lab_1
			add_district = district_hab_housing
			add_district = district_hab_housing
			add_district = district_hab_science
			add_district = district_hab_energy
			add_district = district_hab_energy
			add_district = district_hab_energy
			add_building = building_uplink_node	
			add_building = building_drone_storage			
			add_deposit = amaryllian_d_hab_minerals_1
			add_deposit = amaryllian_d_hab_energy_1
			add_deposit = d_hab_alloy_5
			break = yes
			}
			
	else_if = {
		limit = { owner = { is_hive_empire = yes is_lithoid_empire = no } }
			clear_blockers = yes
			clear_deposits = yes
			remove_building = building_hive_capital
			add_building = building_hab_major_capital
			remove_building = building_research_lab_1
			add_district = district_hab_housing
			add_district = district_hab_housing
			add_district = district_hab_science
			add_district = district_hab_energy
			add_district = district_hab_energy
			add_building = building_hydroponics_farm
			add_building = building_hydroponics_farm
			add_deposit = amaryllian_d_hab_minerals_1
			add_deposit = amaryllian_d_hab_energy_1
			add_deposit = amaryllian_d_hab_food_1
			add_deposit = d_hab_alloy_5
			break = yes
			}

	else = {
			clear_blockers = yes
			clear_deposits = yes
			remove_building = building_capital
			add_building = building_hab_major_capital
			remove_building = building_research_lab_1
			add_district = district_hab_housing
			add_district = district_hab_housing
			add_district = district_hab_science
			add_district = district_hab_science
			add_district = district_hab_energy
			add_district = district_hab_energy
			add_building = building_hydroponics_farm
			add_building = building_hydroponics_farm
			add_deposit = amaryllian_d_hab_minerals_1
			add_deposit = amaryllian_d_hab_energy_1
			add_deposit = amaryllian_d_hab_food_1
			add_deposit = d_hab_alloy_5
			break = yes
		}
	}
}

### Give starting tech to Amaryllian system starters

country_event = {
	id = amaryllian.3
	hide_window = yes
	fire_only_once = yes
	immediate = {
		country_event = {
			id = amaryllian.4
			days = 1
			random = 0
		}
		every_country = {
			limit = {
				any_owned_planet = {
					is_homeworld = yes
					is_capital = yes
					has_planet_flag = amaryllian_habitat }
				any_owned_pop = { is_lithoid = no is_organic_species = yes }
			}
		give_technology = {
			message = no
			tech = tech_hydroponics
		}
	}
		every_country = {
			limit = {
				any_owned_planet = {
					is_homeworld = yes
					is_capital = yes
					has_planet_flag = amaryllian_habitat }
				is_lithoid_empire = yes
			}
		give_technology = {
			message = no
			tech = tech_mineral_purification_1
		}
	}
		every_country = {
			limit = {
				any_owned_planet = {
					is_homeworld = yes
					is_capital = yes
					has_planet_flag = amaryllian_habitat }
			}
		give_technology = {
			message = no
			tech = tech_habitat_1
		}
	}
	}
}

# Federations Void Dwellers Origin
country_event = {
	id = amaryllian.12
	hide_window = yes
	fire_only_once = yes
	immediate = {
#		country_event = {
#			id = amaryllian.4
#			days = 2
#			random = 0
#		}
		every_country = {
			limit = {
				has_civic = civic_amaryllian_habitat
				any_owned_planet = {
					is_homeworld = yes
					is_capital = yes
					has_planet_flag = void_dweller_habitat_1 }
				any_owned_pop = { is_lithoid = no is_organic_species = yes }
			}
		give_technology = {
			message = no
			tech = tech_hydroponics
		}
	}
		every_country = {
			limit = {
				has_civic = civic_amaryllian_habitat
				any_owned_planet = {
					is_homeworld = yes
					is_capital = yes
					has_planet_flag = void_dweller_habitat_1 }
				is_lithoid_empire = yes
			}
		give_technology = {
			message = no
			tech = tech_mineral_purification_1
		}
	}
		every_country = {
			limit = {
				has_civic = civic_amaryllian_habitat
				any_owned_planet = {
					is_homeworld = yes
					is_capital = yes
					has_planet_flag = void_dweller_habitat_1 }
			}
		give_technology = {
			message = no
			tech = tech_habitat_1
		}
	}
	}
}

### Change habitability of secondary species if civic is picked
country_event = {
	id = amaryllian.4
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_civic = civic_amaryllian_habitat
		any_owned_planet = {
					is_homeworld = yes
					is_capital = yes
					has_planet_flag = amaryllian_habitat }
		any_owned_pop = {
			NOT = { is_same_species = root }
			NOT = { pop_has_trait = trait_pc_habitat_preference }
			OR = { is_organic_species = yes is_lithoid = yes}
		} }

	immediate = {
		every_owned_pop = {
			limit = {
				NOT = { is_same_species = root }
				NOT = { pop_has_trait = trait_pc_habitat_preference }
				OR = { is_organic_species = yes is_lithoid = yes}
			}
		modify_species = { species = this
		ideal_planet_class = pc_habitat }
		}

		country_event = {
		id = amaryllian.5
		days = 2
		random = 0
		}	
	
	}
}

### Fix assimilation for modified species
country_event = {
	id = amaryllian.5
	hide_window = yes
	is_triggered_only = yes
	trigger = {
	has_civic = civic_amaryllian_habitat
	any_owned_planet = {
					is_homeworld = yes
					is_capital = yes
					has_planet_flag = amaryllian_habitat }
	}
	immediate = {
		if = {
			limit = {
				any_owned_pop = {
					has_citizenship_type = {
						type = citizenship_assimilation
					}
				}
			}
		every_owned_planet = {
			planet_event = { id = action.65 }
		}
	}
}
}

### Launch events 6 and 7
country_event = {
	id = amaryllian.8
	hide_window = yes
	fire_only_once = yes
	trigger = {
	has_civic = civic_amaryllian_habitat
	}
	immediate = {
		country_event = {
			id = amaryllian.61
			days = 2
			random = 0
		}
		country_event = {
			id = amaryllian.62
			days = 2
			random = 0
		}
		country_event = {
			id = amaryllian.63
			days = 2
			random = 0
		}
		country_event = {
			id = amaryllian.7
			days = 4
			random = 0
		}
	}
}

### Apply civic bonus to habitats
country_event = {
	id = amaryllian.61
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_civic = civic_amaryllian_habitat
		is_gestalt = yes
	}
	immediate = {
		random_owned_planet = {
			if = {
				limit = {
					is_planet_class = pc_habitat
					NOT = { has_modifier = amaryllian_habitat_brain_quarters }
				}
				add_modifier = {
					modifier = amaryllian_habitat_brain_quarters
					days = -1
					}
				}
			else = { break = yes}
			}
		}
	}
	
country_event = {
	id = amaryllian.62
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_civic = civic_amaryllian_habitat
		is_gestalt = no
	}
	immediate = {
		random_owned_planet = {
			if = {
				limit = {
					is_planet_class = pc_habitat
					NOT = { has_modifier = amaryllian_habitat_captain_quarters }
				}
				add_modifier = {
					modifier = amaryllian_habitat_captain_quarters
					days = -1
					}
				}
			else = { break = yes}
			}
		}
	}
	
country_event = {
	id = amaryllian.63
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		NOT = { has_civic = civic_amaryllian_habitat }
	}
	immediate = {
		random_owned_planet = {
			if = {
				limit = {
					is_planet_class = pc_habitat
					OR = {
						has_modifier = amaryllian_habitat_captain_quarters 
						has_modifier =  amaryllian_habitat_brain_quarters
					} }
				remove_modifier = amaryllian_habitat_captain_quarters
				remove_modifier = amaryllian_habitat_brain_quarters
				}
			else = { break = yes}
			}
		}
	}

country_event = {
	id = amaryllian.64
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_ascension_perk = ap_amaryllian_voidchildren
		has_civic = civic_amaryllian_habitat
	}
	
	immediate = {
		random_owned_planet = {
				limit = {
					is_planet_class = pc_habitat
					NOT = { has_modifier = amaryllian_voidchildren_habitat_modifier }
				}
				add_modifier = {
					modifier = amaryllian_voidchildren_habitat_modifier
					days = -1
				}
			}
		}
	}

### Count habitat captains and apply unity bonus
country_event = {
	id = amaryllian.7
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_civic = civic_amaryllian_habitat
	}
	immediate = {

	if = {
		limit = {
				is_gestalt = yes
			}
			
			if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_brain } count = 0 }
			}
		add_modifier = { modifier = amaryllian_gestalt_unity_0 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_brain } count = 1 }
			}
		add_modifier = { modifier = amaryllian_gestalt_unity_1 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_brain } count = 2 }
			}
		add_modifier = { modifier = amaryllian_gestalt_unity_2 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_brain } count = 3 }
			}
		add_modifier = { modifier = amaryllian_gestalt_unity_3 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_brain } count = 4 }
			}
		add_modifier = { modifier = amaryllian_gestalt_unity_4 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_brain } count = 5 }
			}
		add_modifier = { modifier = amaryllian_gestalt_unity_5 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_brain } count = 6 }
			}
		add_modifier = { modifier = amaryllian_gestalt_unity_6 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_brain } count = 7 }
			}
		add_modifier = { modifier = amaryllian_gestalt_unity_7 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_brain } count = 8 }
			}
		add_modifier = { modifier = amaryllian_gestalt_unity_8 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_brain } count = 9 }
			}
		add_modifier = { modifier = amaryllian_gestalt_unity_9 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_brain } count = 10 }
			}
		add_modifier = { modifier = amaryllian_gestalt_unity_10 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_brain } count = 11 }
			}
		add_modifier = { modifier = amaryllian_gestalt_unity_11 days = 360 }
		}

		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_brain } count = 12 }
			}
		add_modifier = { modifier = amaryllian_gestalt_unity_12 days = 360 }
		}

		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_brain } count = 13 }
			}
		add_modifier = { modifier = amaryllian_gestalt_unity_13 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_brain } count = 14 }
			}
		add_modifier = { modifier = amaryllian_gestalt_unity_14 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_brain } count = 15 }
			}
		add_modifier = { modifier = amaryllian_gestalt_unity_15 days = 360 }
		}

		else = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_brain } count > 15 }
			}
		add_modifier = { modifier = amaryllian_gestalt_unity_16 days = 360 }
		}
			
			
			}
	
	else = {			
			
		if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_captain } count = 0 }
			}
		add_modifier = { modifier = amaryllian_unity_0 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_captain } count = 1 }
			}
		add_modifier = { modifier = amaryllian_unity_1 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_captain } count = 2 }
			}
		add_modifier = { modifier = amaryllian_unity_2 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_captain } count = 3 }
			}
		add_modifier = { modifier = amaryllian_unity_3 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_captain } count = 4 }
			}
		add_modifier = { modifier = amaryllian_unity_4 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_captain } count = 5 }
			}
		add_modifier = { modifier = amaryllian_unity_5 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_captain } count = 6 }
			}
		add_modifier = { modifier = amaryllian_unity_6 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_captain } count = 7 }
			}
		add_modifier = { modifier = amaryllian_unity_7 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_captain } count = 8 }
			}
		add_modifier = { modifier = amaryllian_unity_8 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_captain } count = 9 }
			}
		add_modifier = { modifier = amaryllian_unity_9 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_captain } count = 10 }
			}
		add_modifier = { modifier = amaryllian_unity_10 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_captain } count = 11 }
			}
		add_modifier = { modifier = amaryllian_unity_11 days = 360 }
		}

		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_captain } count = 12 }
			}
		add_modifier = { modifier = amaryllian_unity_12 days = 360 }
		}

		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_captain } count = 13 }
			}
		add_modifier = { modifier = amaryllian_unity_13 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_captain } count = 14 }
			}
		add_modifier = { modifier = amaryllian_unity_14 days = 360 }
		}
		
		else_if = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_captain } count = 15 }
			}
		add_modifier = { modifier = amaryllian_unity_15 days = 360 }
		}

		else = {
			limit = {
				count_owned_pops = { limit = { has_job = amaryllian_habitat_captain } count > 15 }
			}
		add_modifier = { modifier = amaryllian_unity_16 days = 360 }
		}
	}
		
	}
}

# Habitat cost and speed build bonus campaign
country_event = {
	id = amaryllian.10
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_civic = civic_amaryllian_habitat
		NOT = { has_country_flag = amaryllian_void_campaign_finished }
	}
	
	immediate = {
		if = {
		limit = { years_passed = 1 }
		country_event = {
			id = amaryllian.11
			days = 31
			random = 0
		}
		}
		
		else_if = {
		limit = { years_passed = 6 }
		add_modifier = { modifier = amaryllian_void_campaign_2 days = 1800 } }
		
		else_if = {
		limit = { years_passed = 11 }
		add_modifier = { modifier = amaryllian_void_campaign_3 days = 1800 } }
		
		else_if = {
		limit = { years_passed = 16 }
		add_modifier = { modifier = amaryllian_void_campaign_4 days = 1800 } }
		
		else_if = {
		limit = { years_passed = 21 }
		add_modifier = { modifier = amaryllian_void_campaign_5 days = 1800 } }
		
		else_if = {
		limit = { years_passed = 26 }
		add_modifier = { modifier = amaryllian_void_campaign_6 days = 1800 } }
		
		else_if = {
		limit = { years_passed = 31 }
		add_modifier = { modifier = amaryllian_void_campaign_7 days = 1800 } }
		
		else_if = {
		limit = { years_passed = 36 }
		add_modifier = { modifier = amaryllian_void_campaign_8 days = 1800 } }
		
		else_if = {
		limit = { years_passed = 41 }
		add_modifier = { modifier = amaryllian_void_campaign_9 days = 1800 } }
		
		else_if = {
		limit = { years_passed = 46 }
		add_modifier = { modifier = amaryllian_void_campaign_10 days = 1800 } }

		else_if = {
		limit = { years_passed > 50 }
		set_country_flag = amaryllian_void_campaign_finished }

		else = { break = yes }
		}
	}

country_event = {
	id = amaryllian.11
	title = amaryllian.11.name
	desc = amaryllian.11.desc
	picture = GFX_evt_megastructure_construction
	show_sound = event_construction_03
	location = root

	is_triggered_only = yes

	trigger = {
		is_ai = no
	}

	option = {
		name = amaryllian.11.a
		add_modifier = { modifier = amaryllian_void_campaign_1 days = 1800 }
	}
}


# Habitat arcology complete
planet_event = {
	id = amaryllian.200
	title = amaryllian.200.name
	desc = amaryllian.200.desc
	picture = GFX_evt_tradestation_interior
	show_sound = event_cityscape
	location = root

	is_triggered_only = yes

	trigger = {
		is_planet_class = pc_habitat
		has_planet_flag = amaryllian_civilian_arcology
	}

	option = {
		name = amaryllian.200.a
	}
}

planet_event = {
	id = amaryllian.201
	title = amaryllian.201.name
	desc = amaryllian.201.desc
	picture = GFX_evt_space_hangar
	show_sound = event_cityscape
	location = root

	is_triggered_only = yes

	trigger = {
		is_planet_class = pc_habitat
		has_planet_flag = amaryllian_arms_arcology
	}

	option = {
		name = amaryllian.201.a
	}
}

planet_event = {
	id = amaryllian.202
	title = amaryllian.202.name
	desc = amaryllian.202.desc
	picture = GFX_evt_baol_ruins
	show_sound = event_cityscape
	location = root

	is_triggered_only = yes

	trigger = {
		is_planet_class = pc_habitat
		has_planet_flag = amaryllian_farming_arcology
	}

	option = {
		name = amaryllian.202.a
	}
}

planet_event = {
	id = amaryllian.203
	title = amaryllian.203.name
	desc = amaryllian.203.desc
	picture = GFX_evt_space_station
	show_sound = event_cityscape
	location = root

	is_triggered_only = yes

	trigger = {
		is_planet_class = pc_habitat
		has_planet_flag = amaryllian_fortress_arcology
	}

	option = {
		name = amaryllian.203.a
	}
}

# Mod update notification
country_event = {
        id = amaryllian.998
        hide_window = yes
		fire_only_once = yes
        trigger = {
                always = yes
        }
		immediate = {
        country_event = {
			id = amaryllian.999
			days = 5
			random = 0
		}
		}
        }

country_event = {
	id = amaryllian.999
	title = amaryllian.999.name
	desc = amaryllian.999.desc
	picture = GFX_evt_200_subscribers_update
	show_sound = event_default
	location = root	
	is_triggered_only = yes
	trigger = {
	is_ai = no
	NOT = { has_country_flag = 200_subscribers_update_notification has_civic = civic_amaryllian_habitat }
	any_owned_planet = { has_planet_flag = amaryllian_habitat }
	}
	option = {
	name = amaryllian.999.a
	set_country_flag = 200_subscribers_update_notification
	}
	option = {
	name = amaryllian.999.b
	add_resource = {
			influence = 250
		}
	set_country_flag = 200_subscribers_update_notification
	}
	}